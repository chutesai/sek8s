# Gatekeeper Helm values for static manifest generation

# Replica configuration
replicas: {{ gatekeeper_replicas | default(1) }}

# Image configuration
image:
  repository: openpolicyagent/gatekeeper
  crdRepository: openpolicyagent/gatekeeper-crds
  release: {{ gatekeeper_image_tag | default('v3.15.0') }}
  pullSecrets: []

# Resource limits
resources:
  limits:
    cpu: {{ gatekeeper_cpu_limit | default('500m') }}
    memory: {{ gatekeeper_memory_limit | default('512Mi') }}
  requests:
    cpu: {{ gatekeeper_cpu_request | default('100m') }}
    memory: {{ gatekeeper_memory_request | default('256Mi') }}

# Priority class
priorityClassName: system-cluster-critical

# Service account
serviceAccount:
  name: gatekeeper-admin

# Logging configuration
logLevel: {{ gatekeeper_log_level | default('INFO') }}
logDenies: {{ gatekeeper_log_denies | default(false) }}

# Controller manager configuration
controllerManager:
  exemptNamespaces: ["gatekeeper-system"]

# External data and cert rotation
enableExternalData: {{ gatekeeper_enable_external_data | default(false) }}
disableCertRotation: true

# Pod annotations
podAnnotations:
  container.seccomp.security.alpha.kubernetes.io/manager: runtime/default

# Pod labels  
podLabels:
  gatekeeper.sh/system: "yes"

# Disable VAP
enableK8sNativeValidation: false

# Allow CONNECT intercepts
enableConnectOperations: true